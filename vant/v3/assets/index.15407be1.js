import{C as he,A as ge,c as z,i as W,y as ye,m as Te,D as Se,f as Y,s as we,E as G,z as J,e as Ce}from"./use-translate.789845f9.js";import{n as x,t as N,d as H,m as xe,b as O,u as Ie,w as Q}from"./with-install.c13b505f.js";import{z as E,C as w,e as m,A as ee,D as B,x as I,G as je,E as Be,q as k,P as ke,I as Re,M as Ae,L as Pe,j as $e,v as pe}from"./vue-libs.1dda7261.js";import{a as ze,r as Ne}from"./use-route.dfb37f70.js";import{S as Oe,u as Ee,a as Le}from"./index.a047f0f1.js";import{u as _e}from"./useParent.5e3d1dfb.js";import{d as De}from"./constant.4d85ecb9.js";import{c as Me}from"./interceptor.4e67a670.js";import{r as Z}from"./utils.39620306.js";import{u as We}from"./use-refs.2bafdad1.js";import{u as He}from"./use-expose.d54fed8a.js";import{o as Ze}from"./on-popup-reopen.1b0dc8ad.js";import{S as Fe}from"./index.45ab6c22.js";import{B as Ve}from"./index.83a50000.js";import{u as qe}from"./index.0749451f.js";import{u as Ke}from"./useChildren.ed284d59.js";import{o as Ue,u as Xe}from"./index.904c4b4d.js";function Ye(e,o,a){let i=0;const d=e.scrollLeft,u=a===0?1:Math.round(a*1e3/16);function f(){e.scrollLeft+=(o-d)/u,++i<u&&Z(f)}f()}function Ge(e,o,a,i){let d=he(e);const u=d<o,f=a===0?1:Math.round(a*1e3/16),c=(o-d)/f;function r(){d+=c,(u&&d>o||!u&&d<o)&&(d=o),ge(e,d),u&&d<o||!u&&d>o?Z(r):i&&Z(i)}r()}function Je(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ee(e)}const[Qe,te]=z("tab");var et=E({name:Qe,props:{dot:Boolean,type:String,color:String,title:String,badge:x,isActive:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String,showZeroBadge:N},setup(e){const o=w(()=>{const i={},{type:d,color:u,disabled:f,isActive:c,activeColor:r,inactiveColor:j}=e;u&&d==="card"&&(i.borderColor=u,f||(c?i.backgroundColor=u:i.color=u));const y=c?r:j;return y&&(i.color=y),i}),a=()=>{const i=m("span",{class:te("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]);return e.dot||W(e.badge)&&e.badge!==""?m(Ve,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},Je(i)?i:{default:()=>[i]}):i};return()=>m("div",{role:"tab",class:[te({active:e.isActive,disabled:e.disabled})],style:o.value,"aria-selected":e.isActive},[a()])}});function tt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ee(e)}const[nt,ne]=z("tabs");var at=E({name:nt,props:{count:H(Number),inited:Boolean,animated:Boolean,duration:H(x),swipeable:Boolean,lazyRender:Boolean,currentIndex:H(Number)},emits:["change"],setup(e,{emit:o,slots:a}){const i=B(),d=c=>o("change",c),u=()=>{var r;const c=(r=a.default)==null?void 0:r.call(a);return e.animated||e.swipeable?m(Oe,{ref:i,loop:!1,class:ne("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:d},tt(c)?c:{default:()=>[c]}):c},f=c=>{const r=i.value;r&&r.state.active!==c&&r.swipeTo(c,{immediate:!e.inited})};return I(()=>e.currentIndex,f),je(()=>{f(e.currentIndex)}),()=>m("div",{class:ne("content",{animated:e.animated||e.swipeable})},[u()])}});const[ae,L]=z("tabs"),ot={type:xe("line"),color:String,border:Boolean,sticky:Boolean,active:O(0),duration:O(.3),animated:Boolean,ellipsis:N,swipeable:Boolean,scrollspy:Boolean,offsetTop:O(0),background:String,lazyRender:N,lineWidth:x,lineHeight:x,beforeChange:Function,swipeThreshold:O(5),titleActiveColor:String,titleInactiveColor:String},oe=Symbol(ae);var it=E({name:ae,props:ot,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:a}){let i,d,u;const f=B(),c=B(),r=B(),j=Ee(),g=qe(f),[y,_]=We(),{children:b,linkChildren:D}=Ke(oe),s=Be({inited:!1,position:"",lineStyle:{},currentIndex:-1}),T=w(()=>b.length>e.swipeThreshold||!e.ellipsis),re=w(()=>({borderColor:e.color,background:e.background})),R=(t,n)=>{var l;return(l=t.name)!=null?l:n},V=w(()=>{const t=b[s.currentIndex];if(t)return R(t,s.currentIndex)}),M=w(()=>ye(e.offsetTop)),q=w(()=>e.sticky?M.value+i:0),A=t=>{const n=c.value,l=y.value;if(!T.value||!n||!l||!l[s.currentIndex])return;const v=l[s.currentIndex].$el,h=v.offsetLeft-(n.offsetWidth-v.offsetWidth)/2;Ye(n,h,t?0:+e.duration)},S=()=>{const t=s.inited;k(()=>{const n=y.value;if(!n||!n[s.currentIndex]||e.type!=="line"||Se(f.value))return;const l=n[s.currentIndex].$el,{lineWidth:v,lineHeight:h}=e,C=l.offsetLeft+l.offsetWidth/2,p={width:Y(v),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(t&&(p.transitionDuration=`${e.duration}s`),W(h)){const X=Y(h);p.height=X,p.borderRadius=X}s.lineStyle=p})},le=t=>{const n=t<s.currentIndex?-1:1;for(;t>=0&&t<b.length;){if(!b[t].disabled)return t;t+=n}},P=t=>{const n=le(t);if(!W(n))return;const l=b[n],v=R(l,n),h=s.currentIndex!==null;s.currentIndex=n,v!==e.active&&(o("update:active",v),h&&o("change",v,l.title))},$=t=>{const n=b.find((v,h)=>R(v,h)===t),l=n?b.indexOf(n):0;P(l)},K=(t=!1)=>{if(e.scrollspy){const n=b[s.currentIndex].$el;if(n&&g.value){const l=G(n,g.value)-q.value;d=!0,Ge(g.value,l,t?0:+e.duration,()=>{d=!1})}}},ce=(t,n,l)=>{const{title:v,disabled:h}=b[n],C=R(b[n],n);o("click-tab",{name:C,title:v,event:l,disabled:h}),h?o("disabled",C,v):(Me({interceptor:e.beforeChange,args:[C],done:()=>{P(n),K()}}),o("click",C,v),ze(t))},se=t=>{u=t.isFixed,o("scroll",t)},de=t=>{k(()=>{$(t),K(!0)})},ue=()=>{for(let t=0;t<b.length;t++){const{top:n}=J(b[t].$el);if(n>q.value)return t===0?0:t-1}return b.length-1},fe=()=>{if(e.scrollspy&&!d){const t=ue();P(t)}},be=()=>b.map((t,n)=>m(et,Re({ref:_(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,isActive:n===s.currentIndex,scrollable:T.value,renderTitle:t.$slots.title,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:l=>{ce(t,n,l)}},Te(t,["dot","badge","title","disabled","showZeroBadge"])),null)),U=()=>{var l,v;const{type:t,border:n}=e;return m("div",{ref:r,class:[L("wrap",{scrollable:T.value}),{[De]:t==="line"&&n}]},[m("div",{ref:c,role:"tablist",class:L("nav",[t,{complete:T.value}]),style:re.value},[(l=a["nav-left"])==null?void 0:l.call(a),be(),t==="line"&&m("div",{class:L("line"),style:s.lineStyle},null),(v=a["nav-right"])==null?void 0:v.call(a)])])};I([()=>e.color,j.width],S),I(()=>e.active,t=>{t!==V.value&&$(t)}),I(()=>b.length,()=>{s.inited&&($(e.active),S(),k(()=>{A(!0)}))}),I(()=>s.currentIndex,()=>{A(),S(),u&&!e.scrollspy&&we(Math.ceil(G(f.value)-M.value))});const ve=()=>{$(e.active),k(()=>{s.inited=!0,r.value&&(i=J(r.value).height),A(!0)})},me=(t,n)=>o("rendered",t,n);return He({resize:S,scrollTo:de}),ke(S),Ze(S),Ue(ve),Xe("scroll",fe,{target:g}),D({props:e,setLine:S,onRendered:me,currentName:V,scrollIntoView:A}),()=>{var t;return m("div",{ref:f,class:L([e.type])},[e.sticky?m(Fe,{container:f.value,offsetTop:M.value,onScroll:se},{default:()=>{var n;return[U(),(n=a["nav-bottom"])==null?void 0:n.call(a)]}}):[U(),(t=a["nav-bottom"])==null?void 0:t.call(a)],m(at,{count:b.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:P},{default:()=>{var n;return[(n=a.default)==null?void 0:n.call(a)]}})])}}});const ie=Symbol(),jt=()=>Ae(ie,null),[rt,F]=z("tab");var lt=E({name:rt,props:Ce({},Ne,{dot:Boolean,name:x,badge:x,title:String,disabled:Boolean,titleClass:Ie,titleStyle:[String,Object],showZeroBadge:N}),setup(e,{slots:o}){const a=B(!1),{parent:i,index:d}=_e(oe);if(!i)return;const u=()=>{var r;return(r=e.name)!=null?r:d.value},f=()=>{a.value=!0,i.props.lazyRender&&k(()=>{i.onRendered(u(),e.title)})},c=w(()=>{const r=u()===i.currentName.value;return r&&!a.value&&f(),r});return I(()=>e.title,()=>{i.setLine(),i.scrollIntoView()}),Pe(ie,c),()=>{var s;const{animated:r,swipeable:j,scrollspy:g,lazyRender:y}=i.props;if(!o.default&&!r)return;const _=g||c.value;if(r||j)return m(Le,{role:"tabpanel","aria-hidden":!c.value,class:F("pane-wrapper",{inactive:!c.value})},{default:()=>{var T;return[m("div",{class:F("pane")},[(T=o.default)==null?void 0:T.call(o)])]}});const D=a.value||g||!y?(s=o.default)==null?void 0:s.call(o):null;return $e(m("div",{role:"tabpanel",class:F("pane")},[D]),[[pe,_]])}}});const Bt=Q(lt),kt=Q(it);export{kt as T,Bt as a,jt as u};
